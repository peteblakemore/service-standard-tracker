{% extends "layout.html" %}

{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block content %}
  {{ govukBackLink({
    text: "Back",
    href: "/"
  }) }}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-l">{{ project.name }}</h1>

      <div class="govuk-!-margin-bottom-4">
        {{ govukButton({
          text: "Export project",
          href: "/projects/" + project.id + "/export"
        }) }}
      </div>

      {{ govukSummaryList({
        rows: [
          {
            key: { text: "Department" },
            value: { text: project.department }
          },
          {
            key: { text: "Current phase" },
            value: { text: project.currentPhase }
          },
          {
            key: { text: "Next assessment" },
            value: { text: project.nextAssessmentType }
          },
          {
            key: { text: "Service description" },
            value: { text: project.description }
          }
        ]
      }) }}

      {% if project.objectives %}
        <h2 class="govuk-heading-m">Objectives</h2>
        <p class="govuk-body">{{ project.objectives }}</p>
      {% endif %}

      <h2 class="govuk-heading-m">Service Standard points</h2>

      <ol class="govuk-task-list">
        {% for standard in project.serviceStandards %}
          <li class="govuk-task-list__item govuk-task-list__item--with-link">
            <div class="govuk-task-list__name-and-hint">
              <a class="govuk-link govuk-task-list__link" href="/projects/{{ project.id }}/standards/{{ standard.id }}">
                {{ standard.number }}. {{ standard.title }}
              </a>
            </div>
            <div class="govuk-task-list__status">
              {% set ragStatus = calculateStandardStatus(standard) %}
              {% include "partials/rag-tag.html" %}
            </div>
          </li>
        {% endfor %}
      </ol>
    </div>
  </div>
{% endblock %}
